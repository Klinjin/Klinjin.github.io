!function(){function e(){let e="./oneko.gif";const n=document.currentScript;if(n&&n.dataset.cat&&(e=n.dataset.cat),n&&n.dataset.persistPosition&&(l=""===n.dataset.persistPosition||JSON.parse(n.dataset.persistPosition.toLowerCase())),l){let e=JSON.parse(window.localStorage.getItem("oneko"));null!==e&&(r=e.nekoPosX,c=e.nekoPosY,d=e.mousePosX,u=e.mousePosY,h=e.frameCount,m=e.idleTime,f=e.idleAnimation,p=e.idleAnimationFrame,s.style.backgroundPosition=e.bgPos)}s.id="oneko",s.ariaHidden=!0,s.style.width="32px",s.style.height="32px",s.style.position="fixed",s.style.pointerEvents="none",s.style.imageRendering="pixelated",s.style.left=r-16+"px",s.style.top=c-16+"px",s.style.zIndex=2147483647,s.style.backgroundImage=`url(${e})`,document.body.appendChild(s),document.addEventListener("mousemove",function(e){d=e.clientX,u=e.clientY}),l&&window.addEventListener("beforeunload",function(){window.localStorage.setItem("oneko",JSON.stringify({nekoPosX:r,nekoPosY:c,mousePosX:d,mousePosY:u,frameCount:h,idleTime:m,idleAnimation:f,idleAnimationFrame:p,bgPos:s.style.backgroundPosition}))}),window.requestAnimationFrame(t)}function t(e){s.isConnected&&(W||(W=e),e-W>100&&(W=e,a()),window.requestAnimationFrame(t))}function n(e,t){const n=g[e][t%g[e].length];s.style.backgroundPosition=`${32*n[0]}px ${32*n[1]}px`}function o(){f=null,p=0}function i(){if(m+=1,m>10&&0==Math.floor(200*Math.random())&&null==f){let e=["sleeping","scratchSelf"];r<32&&e.push("scratchWallW"),c<32&&e.push("scratchWallN"),r>window.innerWidth-32&&e.push("scratchWallE"),c>window.innerHeight-32&&e.push("scratchWallS"),f=e[Math.floor(Math.random()*e.length)]}switch(f){case"sleeping":if(p<8){n("tired",0);break}n("sleeping",Math.floor(p/4)),p>192&&o();break;case"scratchWallN":case"scratchWallS":case"scratchWallE":case"scratchWallW":case"scratchSelf":n(f,p),p>9&&o();break;default:return void n("idle",0)}p+=1}function a(){h+=1;const e=r-d,t=c-u,o=Math.sqrt(e**2+t**2);if(o<w||o<48)return void i();if(f=null,p=0,m>1)return n("alert",0),m=Math.min(m,7),void(m-=1);let a;a=t/o>.5?"N":"",a+=t/o<-.5?"S":"",a+=e/o>.5?"W":"",a+=e/o<-.5?"E":"",n(a,h),r-=e/o*w,c-=t/o*w,r=Math.min(Math.max(16,r),window.innerWidth-16),c=Math.min(Math.max(16,c),window.innerHeight-16),s.style.left=r-16+"px",s.style.top=c-16+"px"}if(!0===window.matchMedia("(prefers-reduced-motion: reduce)")||!0===window.matchMedia("(prefers-reduced-motion: reduce)").matches)return;const s=document.createElement("div");let l=!0,r=32,c=32,d=0,u=0,h=0,m=0,f=null,p=0;const w=10,g={idle:[[-3,-3]],alert:[[-7,-3]],scratchSelf:[[-5,0],[-6,0],[-7,0]],scratchWallN:[[0,0],[0,-1]],scratchWallS:[[-7,-1],[-6,-2]],scratchWallE:[[-2,-2],[-2,-3]],scratchWallW:[[-4,0],[-4,-1]],tired:[[-3,-2]],sleeping:[[-2,0],[-2,-1]],N:[[-1,-2],[-1,-3]],NE:[[0,-2],[0,-3]],E:[[-3,0],[-3,-1]],SE:[[-5,-1],[-5,-2]],S:[[-6,-3],[-7,-2]],SW:[[-5,-3],[-6,-1]],W:[[-4,-2],[-4,-3]],NW:[[-1,0],[-1,-1]]};let W;e()}();